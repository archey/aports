# Contributor: Fabian Affolter <fabian@affolter-engineering.ch>
# Maintainer: Fabian Affolter <fabian@affolter-engineering.ch>
pkgname=netsniff-ng
pkgver=0.6.3
pkgrel=0
pkgdesc="A network analyzer and networking toolkit"
url="http://netsniff-ng.org/"
arch="all"
license="GPL2"
makedepends="geoip-dev libsodium-dev linux-headers libpcap-dev libnet-dev libnl3-dev zlib-dev ncurses-dev
	libnetfilter_conntrack-dev libnfnetlink-dev coreutils pkgconf gettext-dev"
subpackages="$pkgname-doc"
source="http://www.netsniff-ng.org/pub/netsniff-ng/$pkgname-$pkgver.tar.gz
        netsniff-ng-build-fixes.patch"

builddir="$srcdir"/$pkgname-$pkgver

build() {
	cd "$builddir"
	# forces use of newer libsodium library for curvetun
        export NACL_LIB=sodium
        export NACL_INC_DIR=$(pkg-config --variable=includedir libsodium )/sodium
        ./configure --prefix=/usr
	make PREFIX=/usr
}

package() {
	cd "$builddir"
	make DESTDIR="$pkgdir" install
}

sha512sums="ad33d25f5b063750fa0004cb4ca1a57b9b2c32df3fd507d2a03085340c25326d55743119e3aa98e31333864353410e60e2828de7710b807754cac71befc629e9  netsniff-ng-0.6.3.tar.gz
b0441e9ff90eee2b66b757b62d0cc4fb990fe3fd48fc52bab111ad7b67bc61d1b60f7dab908113503942eb9ad7261b8483f5d9b198dcb5b4313b98dd163d42ef  netsniff-ng-build-fixes.patch"
